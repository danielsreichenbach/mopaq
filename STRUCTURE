mopaq/
├── Cargo.toml
├── src/
│   ├── lib.rs                    # Library entry point with module declarations
│   ├── header.rs                 # MPQ header structures and parsing
│   ├── tables/                   # Tables module
│   │   ├── mod.rs                # Module entry point, unified table API
│   │   ├── hash_table.rs         # Hash table implementation
│   │   ├── block_table.rs        # Block table implementation
│   │   ├── ext_table.rs          # Extended block table (v2+)
│   │   ├── het_table.rs          # HET table (v3+)
│   │   ├── bet_table.rs          # BET table (v3+)
│   │   ├── attributes.rs         # Attribute table handling
│   │   └── lookup.rs             # File lookup algorithms
│   ├── crypto/                   # Cryptography module
│   │   ├── mod.rs                # Module entry point, exports public API
│   │   ├── constants.rs          # Cryptographic constants (STORM_BUFFER_CRYPT table)
│   │   ├── hash.rs               # MPQ hash functions (filename, table position)
│   │   ├── encryption.rs         # Block encryption/decryption
│   │   └── key_derivation.rs     # Key generation from filename/position
│   ├── compression/              # Compression module
│   │   ├── mod.rs                # Module entry point, unified API
│   │   ├── pkware.rs             # PKWARE DCL implementation
│   │   ├── huffman.rs            # Huffman implementation
│   │   ├── zlib.rs               # zlib wrapper
│   │   ├── bzip2.rs              # bzip2 wrapper
│   │   ├── lzma.rs               # LZMA wrapper
│   │   ├── sparse.rs             # Sparse compression
│   │   ├── adpcm.rs              # IMA ADPCM compression for audio
│   │   ├── wave.rs               # WAVE compression
│   │   └── multi.rs              # Multi-compression handling
│   ├── archive.rs                # Archive reading/writing
│   ├── file.rs                   # File handling within archives
│   ├── patch.rs                  # Patch file support
│   ├── listfile.rs               # (listfile) handling
│   └── error.rs                  # Error types
├── tests/
│   ├── integration.rs            # Integration tests
│   ├── tables/                   # Table-specific tests
│   │   ├── hash_table_tests.rs   # Hash table tests
│   │   ├── block_table_tests.rs  # Block table tests
│   │   └── lookup_tests.rs       # File lookup tests
│   ├── crypto/                   # Crypto-specific tests
│   │   ├── hash_tests.rs         # Hash function tests
│   │   └── encryption_tests.rs   # Encryption/decryption tests
│   ├── compression/              # Compression-specific tests
│   │   ├── pkware_tests.rs       # PKWARE compression tests
│   │   └── multi_tests.rs        # Multi-compression tests
│   ├── test_files/               # Sample MPQ files for testing
│   └── stormlib_compat.rs        # StormLib compatibility tests
└── benches/
    ├── tables/                   # Table-specific benchmarks
    │   ├── hash_table_bench.rs   # Benchmark hash table operations
    │   └── lookup_bench.rs       # Benchmark file lookup operations
    ├── crypto/                   # Crypto-specific benchmarks
    │   ├── hash_bench.rs         # Benchmark hashing
    │   └── encryption_bench.rs   # Benchmark encryption/decryption
    ├── compression/              # Compression-specific benchmarks
    │   ├── pkware_bench.rs       # Benchmark PKWARE
    │   └── comparison_bench.rs   # Compare different compression methods
    └── read_bench.rs             # Benchmark file reading
